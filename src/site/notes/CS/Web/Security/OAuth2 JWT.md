---
{"dg-publish":true,"permalink":"/cs/web/security/o-auth2-jwt/","dgPassFrontmatter":true,"noteIcon":""}
---


## 액세스 시나리오

![Pasted image 20241019163257.png](/img/user/images/Pasted%20image%2020241019163257.png)
###### 1. 토큰 달라고 요청  & 로그인 시도 (아직 토큰은 받지 못함)
-  이 요청에는 클라이언트 ID, 리디렉션 URI, 요청하는 스코프 등이 포함됨
-  사용자는 Google 로그인 화면에서 인증을 시도
###### 2. 구글에서 승인 코드줌
-  사용자가 로그인에 성공하면, Google은 애플리케이션이 설정한 **리디렉션 URI**로 **Authorization Code**를 보내줌
-  이 Authorization Code는 임시 코드로, 토큰을 요청하기 위한 **교환 수단**임

###### 3. 승인 코드를 토큰으로 바꿔달라고 요청함
-  애플리케이션은 받은 **Authorization Code**를 사용해 Google에게 **액세스 토큰**과 **리프레시 토큰**을 요청함
-  이 과정에서는 **클라이언트 ID, 클라이언트 시크릿, 승인 코드 등**이 포함된 토큰 교환 요청을 함
-  리프레시 토큰(Refresh Token)은 OAuth 2.0 인증 흐름에서 액세스 토큰(Access Token)이 만료되었을 때, 새로운 액세스 토큰을 발급받기 위해 사용하는 장기 유효 토큰임
-  액세스 토큰은 일정 시간이 지나면 만료되는데, 이때 다시 사용자가 로그인하지 않고도 새로운 액세스 토큰을 발급받기 위해 리프레시 토큰을 사용함

###### 4. 구글에서 토큰을 줌
-  Google은 유효한 Authorization Code와 클라이언트 정보를 확인하고, 애플리케이션에 액세스 토큰과 리프레시 토큰을 반환함

###### 5. 액세스 토큰을 사용해서 google api 를 요청을 보냄
-  사용자의 이메일 주소, 이름, 프로필 사진 등 **Google 사용자 정보**를 요청할 수 있음

###### 6. 이후 Google API는  사용자 정보를 반환함
-  이 정보를 통해 사용자를 애플리케이션에 등록하거나 로그인 처리를 완료할 수 있음

