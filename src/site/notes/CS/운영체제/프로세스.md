---
{"dg-publish":true,"permalink":"/cs///","dgPassFrontmatter":true,"noteIcon":"","created":"2024-11-02T20:14:12.786+09:00","updated":"2024-11-05T04:52:07.800+09:00"}
---


# 프로세스(process)란?

==보조기억 장치에 저장된 프로그램을 메모리에 적재하고 실행하는 순간 그 프로그램은 프로세스가 되며 이 과정을 '프로세스를 생성한다.' 라고 표현함==

## 프로세스 종류

- 포그라운드 프로세스 (foreground process)
	- 사용자가 보는 앞에서 실행되는 프로세스
- 백그라운드 프로세스 (background process)
	- 사용자가 보지 못하는 뒤편에서 실행되는 프로세스
	- 백그라운드 프로세스 중에는 사용자와 직접 상호작용할 수 있는 프로세스도 있지만 상호작용하지 않는 프로세스도 있음. 이러한 백그라운드 프로세스를 유닉스 체계는 **데몬(daemon)** 이라고 부르고 윈도우 운영체제에서는 **서비스(service)** 라고 부름

## 프로세스 제어 블록

**PCB는 프로세스와 관련된 정보를 저장하는 자료구조이다.**

- 운영체제는 빠르게 번갈아 수행되는 프로세스의 실행 순서를 관리하고, CPU를 비롯한 자원을 배분한다. 이를 위해 운영체제는 프로세스 제어 블록(PCB:process control block)를 이용한다.
- 상품에 달린 태그랑 비슷하다고 생각하면되고 <u>프로세스를 식별하기 위해 꼭 필요한 정보들이 저장됨</u>
- 커널 영역에 생성됨
- 프로세스 생성 시에 만들어지고 실행이 끝나면 폐기됨

### PCB에 담기는 정보들
- 프로세스 ID (PID:process ID)
	- 특정 프로세스를 식별하기 위해 부여하는 고유 번호
	- 같은 프로그램이라 해도 두 번 실행하면 PID가 2개 생성됨
- 레지스터 값
	- 프로세스는 자기 실행차례가 오면 이전까지 진행했던 작업들을 복원해야함. 그래서 프로세스가 실행되며 사용했던 프로그램 카운터를 비롯한 레지스터 값들이 담김
- 프로세스 상태
	- 현재 프로세스가 어떤 상태인지 기록되어야 함
	- 입출력장치를 사용하기 위해 기다리고 있는지, cpu를 사용하기 위해 기다리고 있는 지 등
- CPU 스케줄링 정보
- 메모리 관리 정보
	- 프로세스마다 메모리에 저장된 위치가 다르기에 어느 주소에 저장되어 있는지에 대한 정보가 있어야 함
- 사용한 파일과 입출력장치 목록
	- 어떤 입출력장치가 이 프로세스에 할당되었는지, 어떤 파일들을 열었는지에 대한 정보들이 담김

## 문맥 교환

**기존 프로세스의 문맥을 PCB에 백업하고, 새로운 프로세스를 실행하기 위해 문맥을 PCB로부터 복구하여 새로운 프로세스를 실행하는 것**

- <u>PCB에 기록되는 정보들을 문맥이라고 보면 됨 </u>
- cpu를 사용할 수 있는 시간이 다 되거나 인터럽트가 발생할 때 프로세스들은 **문맥 백업**과 **문맥 복구**를 하며 자연스럽게 실행되는 프로세스가 바뀜
- 문맥교환은 여러 프로세스가 끊임없이 빠르게 번갈아 가며 실행되는 원리이기에 우리 눈에는 프로세스들이 동시에 실행되는 것처럼 보임
- 하지만 문맥교환을 너무 자주 하면 오버헤드가 발생할 수 있기 때문에 무조건 빠르다고 좋은 건 아님

## 프로세스의 메모리 영역

프로세스가 생성되면 커널 영역에는 PCB가 생성되고 사용자 영역에는 크게 4개로 나뉘어 저장됨

`정적 할당 영역` : 크기가 고정된 영역 (코드 영역, 데이터 영역)
`동적 할당 영역` : 크기가 변하는 영역 (힙 영역, 스택 영역) 

그래서 일반적으로 힙 영역은 메모리 낮은 주소-> 높은 주소로 할당되고 스택 영역은 높은 주소-> 낮은 주소로 할당해서 충돌을 방지


- 코드 영역 (code segment = text segment)
	- 기계어로 저장된 명령어가 저장됨
	- 읽기 전용 공간
- 데이터 영역 (data segment)
	- 프로그램이 실행되는 동안 유지할 데이터가 저장됨
	- 전역 변수가 대표적
- 힙 영역 (heap segment)
	- 프로그래머가 직접 할당할 수 있는 저장 공간
	- 메모리 공간을 할당했다면 언젠가는 해당 공간을 반환해야하는데 이를 반환하지 않으면 메모리 낭비를 초래함 => 메모리 누수(memory leak)
- 스택 영역 (stack segment)
	- 데이터를 일시적으로 저장하는 공간
	- 매개 변수, 지역 변수가 대표적
	- 일시적으로 저장할 데이터는 스택 영역에 push되고 더 이상 필요하지 않은 데이터는 pop됨으로써 스택 영역에서 사라짐

### 프로세스 상태

- 생성 상태
	- 프로세스를 생성 중인 상태
	- 이제 막 메모리에 적재되어 ==PCB를 할당 받은 상태==
	- 준비 상태가 되어 CPU의 할당을 기다림
- 준비 상태
	- 당장이라도 CPU를 할당받아 실행할 수 있지만 아직 자기 차례가 아니라서 ==기다리고 있는 상태==
	- 준비 상태인 프로세스가 실행 상태로 전환되는 것을 **디스패치(dispatch)라고 함**
- 실행 상태
	- ==CPU를 할당받아 실행 중인 상태==
	- 할당된 일정 시간 동안만 CPU를 사용할 수 있음 
	- 시간 다되면(타이머 인터럽트가 발생하면) 다시 준비 상태 or 대기 상태가 됨
- 대기 상태
	- 입출력 장치를 사용하는 경우 ==입출력장치의 작업을 기다리는 상태==
	- 입출력 작업이 완료되면 해당 프로세스는 다시 준비 상태로 CPU 할당을 기다림
- 종료 상태
	- ==프로세스가 종료된 상태==
	- 운영체제는 PCB와 프로세스가 사용한 메모리를 정리함

## 프로세스 계층 구조

- 프로세스가 다른 프로세스를 생성한 경우 프로세스를 생성한 프로세스를 ==부모 프로세스==, 생성된 프로세스를 ==자식 프로세스== 라고 부름
- 많은 운영체제는 fork와 exec을 통해 프로세스 계층 구조를 형성함