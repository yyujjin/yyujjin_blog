---
{"dg-publish":true,"permalink":"/cs//jwt/","dgPassFrontmatter":true,"noteIcon":"","created":"2024-11-06T18:58:06.429+09:00","updated":"2024-11-06T19:38:14.507+09:00"}
---



- JWT(Json Web Token)는 ==서버와 클라이언트 간의 인증과 정보 전달==을 위해 사용되는<u> JSON 형식의 토큰</u>이다.
- <u>토큰 자체에 사용자 정보를 포</u>함하고 있으며, **서명을 통해 변조되지 않았음을 검증**할 수 있다.



## ☑️ JWT의 구조

![스크린샷 2024-11-06 오후 7.10.16.png](/img/user/images/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-11-06%20%EC%98%A4%ED%9B%84%207.10.16.png)

세 부분이 합쳐져서 토큰이 만들어진다. 

1. **헤더 (Header)**: 토큰의 타입과 서명 알고리즘에 대한 정보가 담깁니다.
2. **페이로드 (Payload)**: 사용자 정보와 같은 데이터를 담고 있습니다.
3. **서명 (Signature)**: 헤더와 페이로드가 변조되지 않았음을 확인하기 위해 **비밀키**를 사용해 생성된 암호화된 값입니다.
	- **서명**은 JWT가 특정 서버에서 발급되었고, 이후 **변조되지 않았다는 것을 증명하는 디지털 사인**입니다. 이를 통해 서버는 **토큰의 신뢰성을 검증**할 수 있습니다.



## ☑️ 주의 사항

- 헤더와 페이로드는 Base64 URL 인코딩만 되어 있기 때문에 <u>누구든지 디코딩해 볼 수 있다.</u>
- 그러므로 ==민감한 정보는 토큰의 페이로드에 담지 않아야 한다.==
- 중요한 정보는 암호화된 상태로 별도의 저장소에서 관리하고, **페이로드에는 식별을 위한 최소한의 정보만 포함하는 것이 안전하다.**



## 🔐 JWT 인증 전체 과정

1. **🧑‍💻 사용자 로그인**:
    
    - 사용자가 로그인 요청을 서버로 보냅니다(예: 사용자 ID와 비밀번호 입력).
2. **🔑 서버에서 JWT 생성 및 발급**:
    
    - 서버는 **사용자 정보 확인 후** JWT를 생성합니다.
    - **JWT 구성**:
        - **헤더**에는 토큰 타입(JWT)과 알고리즘 정보가 담깁니다.
        - **페이로드**에는 사용자 정보(예: 사용자 ID, 권한)와 만료 시간 등이 포함됩니다.
        - **서명**은 **헤더와 페이로드에 비밀키를 사용해 암호화**된 값으로, 무결성을 보장합니다.
    - **JWT 발급**: 생성된 **토큰(헤더.페이로드.서명)**을 클라이언트로 전송합니다.
3. **🍪 클라이언트에서 JWT 저장**:
    
    - 클라이언트는 받은 JWT를 **쿠키 또는 로컬 스토리지에 안전하게 저장**합니다.
4. **📨 요청마다 JWT 포함하여 서버로 전송**:
    
    - 클라이언트는 이후 요청마다 **Authorization 헤더에 JWT를 포함**해 서버로 전송합니다.
        - 예: `Authorization: Bearer <JWT 토큰>`
5. **🛠 서버에서 토큰 검증**:
    
    - 서버는 클라이언트로부터 받은 **JWT를 헤더, 페이로드, 서명** 세 부분으로 분리합니다.
    - 서버는 **헤더와 페이로드에 비밀키를 사용해 다시 서명을 생성**하고, 이 서명이 토큰의 서명 부분과 **일치하는지 확인**합니다.
        - **일치**하면 → 토큰이 변조되지 않았으며 유효하다고 판단하여 요청을 처리합니다.
        - **일치하지 않으면** → 변조된 토큰으로 간주하고 요청을 거부합니다.
6. **✅ 검증 후 요청 처리 및 응답**:
    
    - 서버가 토큰을 확인하고 유효하다고 판단되면, **요청된 자원에 접근하거나 데이터를 처리**하여 응답을 클라이언트에 보냅니다.
7. **⏰ 토큰 만료 시**:
    
    - 토큰의 만료 시간이 지나면 **토큰이 만료된 것으로 간주**되며, 서버는 해당 토큰으로 요청을 거부하고 **재로그인을 요청**할 수 있습니다.



